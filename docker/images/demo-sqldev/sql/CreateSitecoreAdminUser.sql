USE [Sitecore.Core]

declare @UserName_ nvarchar(256) = $(UserName)
declare @EMail_ nvarchar(256) = $(EMail)
declare @EncodedPassword_ nvarchar(128) = $(EncodedPassword)
declare @EncodedSalt_ nvarchar(128) = $(EncodedSalt)

DECLARE @now datetime = GETDATE()
exec aspnet_Membership_CreateUser 'sitecore', @UserName_, @EncodedPassword_, @EncodedSalt_, @EMail_,'','', 1, @now, @now, 0, 0,null

DECLARE @UserId nvarchar(256)
SELECT TOP 1
  @UserId = [UserId]
FROM [aspnet_Users]
WHERE [UserName] = @UserName_

INSERT [dbo].[aspnet_Profile]
  ([UserId], [PropertyNames], [PropertyValuesString], [PropertyValuesBinary], [LastUpdatedDate])
VALUES
  (@UserId,
    N'IsAdministrator:S:0:4:Portrait:S:4:29:FullName:S:33:13:ProfileItemId:S:46:38:SerializedData:B:0:2431:',
    N'Trueoffice/16x16/default_user.pngAdministrator{AE4C4969-5B7E-4B4E-9042-B2D8701CE214}',
    0x0001000000FFFFFFFF01000000000000000401000000E20153797374656D2E436F6C6C656374696F6E732E47656E657269632E44696374696F6E61727960325B5B53797374656D2E537472696E672C206D73636F726C69622C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038395D2C5B53797374656D2E537472696E672C206D73636F726C69622C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038395D5D040000000756657273696F6E08436F6D7061726572084861736853697A650D4B657956616C756550616972730003000308920153797374656D2E436F6C6C656374696F6E732E47656E657269632E47656E65726963457175616C697479436F6D706172657260315B5B53797374656D2E537472696E672C206D73636F726C69622C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038395D5D08E60153797374656D2E436F6C6C656374696F6E732E47656E657269632E4B657956616C75655061697260325B5B53797374656D2E537472696E672C206D73636F726C69622C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038395D2C5B53797374656D2E537472696E672C206D73636F726C69622C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038395D5D5B5D2400000009020000001100000009030000000402000000920153797374656D2E436F6C6C656374696F6E732E47656E657269632E47656E65726963457175616C697479436F6D706172657260315B5B53797374656D2E537472696E672C206D73636F726C69622C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038395D5D00000000070300000000010000001000000003E40153797374656D2E436F6C6C656374696F6E732E47656E657269632E4B657956616C75655061697260325B5B53797374656D2E537472696E672C206D73636F726C69622C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038395D2C5B53797374656D2E537472696E672C206D73636F726C69622C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038395D5D04FCFFFFFFE40153797374656D2E436F6C6C656374696F6E732E47656E657269632E4B657956616C75655061697260325B5B53797374656D2E537472696E672C206D73636F726C69622C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038395D2C5B53797374656D2E537472696E672C206D73636F726C69622C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038395D5D02000000036B65790576616C756501010605000000272F73697465636F72655C5C61646D696E2F5368656C6C2F53686F7744617461626173654E616D650606000000047472756501F9FFFFFFFCFFFFFF06080000001357616C6C70617065724261636B67726F756E640609000000072330373333374301F6FFFFFFFCFFFFFF060B0000001157616C6C7061706572506F736974696F6E060C00000005436F76657201F3FFFFFFFCFFFFFF060E0000001464696765737463726564656E7469616C68617368060F00000020373130373464333335653834393632396562616532383434656165333436306101F0FFFFFFFCFFFFFF06110000002164696765737463726564656E7469616C68617368776974686F7574646F6D61696E061200000020313961323764323333663534633962303930303764303533326634666464343301EDFFFFFFFCFFFFFF06140000000D5061636B616765722F46696C65061500000019416C746F6C6120536974656C6966792D312E302E302E7A697001EAFFFFFFFCFFFFFF06170000001F2F73697465636F72655C61646D696E2F526962626F6E2F4D792053747269700618000000267B44333341303634312D394631432D343938342D383334322D3036353543334430463132337D01E7FFFFFFFCFFFFFF061A000000272F73697465636F72655C61646D696E2F5075626C6973682F5075626C6973684368696C6472656E061B0000000566616C736501E4FFFFFFFCFFFFFF061D000000212F73697465636F72655C61646D696E2F5075626C6973682F4C616E677561676573061E00000002656E01E1FFFFFFFCFFFFFF06200000001F2F73697465636F72655C61646D696E2F5075626C6973682F546172676574730621000000267B38453038303632362D444443332D344546342D413144312D4630424534413230303235347D01DEFFFFFFFCFFFFFF06230000002A2F73697465636F72655C61646D696E2F5075626C6973682F496E6372656D656E74616C5075626C697368091B00000001DBFFFFFFFCFFFFFF0626000000242F73697465636F72655C61646D696E2F5075626C6973682F536D6172745075626C697368091B00000001D8FFFFFFFCFFFFFF0629000000212F73697465636F72655C61646D696E2F5075626C6973682F52657075626C697368062A000000047472756501D5FFFFFFFCFFFFFF062C0000002B2F73697465636F72655C61646D696E2F5075626C6973682F5075626C69736852656C617465644974656D73092A00000001D2FFFFFFFCFFFFFF062F000000312F73697465636F72655C61646D696E2F436F6E74656E7420456469746F722F53656374696F6E732F436F6C6C61707365640630000000173F517569636B496E666F3D3026576F726B666C6F773D3101CFFFFFFFFCFFFFFF06320000003A2F73697465636F72655C61646D696E2F557365724F7074696F6E732E436F6E74656E74456469746F722E53686F7753797374656D4669656C6473063300000004747275650B, CAST(0x0000A2F500D2B376 AS DateTime))

UPDATE [dbo].[aspnet_Membership]
SET [PasswordFormat] = 1
WHERE [UserId] = @UserID
