<configuration  xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform" xmlns:asmv1="urn:schemas-microsoft-com:asm.v1">

  <!-- Environment variable support -->
  <configSections>
    <section name="configBuilders" type="System.Configuration.ConfigurationBuildersSection, System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" restartOnExternalChanges="false" requirePermission="false" xdt:Transform="InsertIfMissing" xdt:Locator="Match(name)" />
  </configSections>

  <configBuilders xdt:Transform="InsertIfMissing">
    <builders>
      <add name="AS_Environment" mode="Expand" type="Microsoft.Configuration.ConfigurationBuilders.EnvironmentConfigBuilder, Microsoft.Configuration.ConfigurationBuilders.Environment, Version=1.0.0.0, Culture=neutral" xdt:Transform="InsertIfMissing" xdt:Locator="Match(name)" />
      <add name="CS_Environment" mode="Expand" type="Microsoft.Configuration.ConfigurationBuilders.EnvironmentConfigBuilder, Microsoft.Configuration.ConfigurationBuilders.Environment, Version=1.0.0.0, Culture=neutral" xdt:Transform="InsertIfMissing" xdt:Locator="Match(name)" />
    </builders>
  </configBuilders>
  <!-- /Environment variable support -->

  <appSettings>
    <!-- Enable/Disable Deployment of Lighthouse Fitness Kiosk App Items -->
    <add key="kiosk:define" value="On" xdt:Transform="InsertIfMissing" xdt:Locator="Match(key)" />

    <!-- Enable/Disable Deployment of Content Hub items -->
    <add key="contenthub:define" value="Off" xdt:Transform="InsertIfMissing" xdt:Locator="Match(key)" />

    <!-- Enable/Disable Unicorn functionality -->
    <add key="unicorn:define" value="Off" xdt:Transform="InsertIfMissing" xdt:Locator="Match(key)" />
  </appSettings>

  <location>
    <system.webServer>
      <httpProtocol>
        <customHeaders>
          <add xdt:Transform="SetAttributes" xdt:Locator="Match(name)" name="Content-Security-Policy" value="default-src 'self' 'unsafe-inline' 'unsafe-eval' https://apps.sitecore.net https://*.stylelabs.io https://*.stylelabs.cloud https://*.stylelabsdemo.com https://*.stylelabsqa.com https://*.stylelabsdev.com https://*.googleapis.com http://*.sitecoredemo.io http://*.sitecoredemo.com; img-src 'self' data: https://*.stylelabs.io https://*.stylelabs.cloud https://*.stylelabsdemo.com https://*.stylelabsqa.com https://*.stylelabsdev.com https://*.gstatic.com https://*.googleapis.com http://*.sitecoredemo.io http://*.sitecoredemo.com; style-src 'self' 'unsafe-inline' https://*.googleapis.com https://*.typekit.net http://*.sitecoredemo.io http://*.sitecoredemo.com; font-src 'self' 'unsafe-inline' https://*.gstatic.com https://*.typekit.net http://*.sitecoredemo.io http://*.sitecoredemo.com;" />
        </customHeaders>
      </httpProtocol>
    </system.webServer>
  </location>

  <system.webServer>
    <handlers>
      <add verb="*" path="sitecorejss_media.ashx" type="Sitecore.JavaScriptServices.Media.MediaRequestHandler, Sitecore.JavaScriptServices.Media" name="Sitecore.JavaScriptServices.Media.MediaRequestHandler" xdt:Transform="InsertIfMissing" xdt:Locator="Match(name)" />
    </handlers>
  </system.webServer>

</configuration>
